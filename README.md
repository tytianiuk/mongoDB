**Виконав:** 
*студент 2-го курсу, групи ІМ-22:* 

<span padding-right:5em></span> **Титянюк Артем** [Пошта: tytianiuk@gmail.com, [Телеграм](https://t.me/Artem_Nikolaevi4)]

**Керівник**

*доцент кафедри ОТ ФІОТ, к.т.н., доцент*<span padding-right:5em></span> **Андрій БОЛДАК** 

[НТУУ "КИЇВСЬКИЙ ПОЛІТЕХНІЧНИЙ ІНСТИТУТ імені ІГОРЯ СІКОРСЬКОГО](https://kpi.ua/)

[Факультет інформатики та обчислювальної техніки](https://fiot.kpi.ua/)

[Кафедра обчислювальної техніки](https://comsys.kpi.ua/)

Київ

# MongoDB та MongoDB Atlas
<p align="center">
  <img src="./pictures/icon.png" alt="MongoDB.png">
</p>

## Вступ 
Доброго дня, шановні колеги та вельмишановний Андрію Олександровичу! Сьогодні хочу звернути вашу увагу на сучасну NoSQL базу даних.

Моя доповідь буде присвячена **MongoDB** та її облачній платформі — **MongoDB Atlas**.

## Що таке MongoDB? 

### MongoDB

**MongoDB** — це сучасна, гнучка та потужна NoSQL база даних, яка використовує концепцію документо-орієнтованого зберігання даних. У порівнянні з традиційними реляційними базами даних, MongoDB дозволяє зберігати дані у вигляді документів у форматі BSON, тобто Binary JSON, що робить її особливо ефективною для роботи з великими об'ємами даних та для проєктів, де схема даних може часто змінюватися.

### Основні характеристики MongoDB:

- **Документо-орієнтований підхід:** Як вже казали, вміст даних представлений у вигляді BSON-документів, що дає можливість зберігати різноманітні дані в одному документі.
- **Гнучкість схеми:** Через те, що відсутня фіксована схема, дозволяється додавати та видаляти поля з документів без значущих змін в структурі нашої бази даних.
- **Підтримка індексів:** Завдяки використанню індексації забезпечено швидкий доступ до даних за різними критеріями.
- **Горизонтальне масштабування:** Маємо можливість розширення обсягів даних за рахунок додавання нових серверів.

## Що таке MongoDB Atlas?
<p align="center">
  <img src="./pictures/atlas.png" alt="MongoDB_Atlas.png">
</p>

### MongoDB Atlas 

**MongoDB Atlas** — це хмарна платформа для MongoDB, яка надає простий та зручний спосіб управління базами даних MongoDB в хмарному середовищі. Заснована на основі оригінальної бази данних MongoDB, Atlas пропонує ряд додаткових можливостей та переваг, про які ми скоро поговоримо.

### Що таке кластер?
<p align="center">
  <img src="./pictures/cluster.jpg" alt="cluster.jpg">
</p>

**MongoDB кластер** - це група з одного або декількох серверів, що містять точну копію даних. Хоча технічно можливо мати один або два вузли, рекомендований мінімум - три. Основний вузол відповідає за забезпечення операцій читання та запису вашого додатку, тоді як два вторинні вузли містять репліки даних.

### Особливості MongoDB Atlas

- **Автоматичне масштабування:** Atlas надає зручний інтерфейс для автоматичного масштабування кластерів відповідно до потреб вашого додатка або програми.
- **Зручний моніторинг та аналітика:** В Atlas вбудований інструментарій для моніторингу продуктивності, безпеки та доступності вашого кластера.
- **Безпека даних:** Інтеграція з інструментами шифрування, визначення прав доступу робить Atlas надзвичайно безпечною хмарною платформою.
- **Глобальна доступність:** Можливість вибору регіону для розміщення кластера, що дозволяє покращити швидкість доступу для користувачів з різних частин світу.

## Чому краще обрати MongoDB та MongoDB Atlas?

Порівнюючи **MongoDB** та **MongoDB Atlas** з іншими базами даних та облачними платформами, можу виділити такі ключові переваги:

- **Гнучкість та швидкодія:** MongoDB надає гнучкий підхід до зберігання даних, а Atlas забезпечує простоту та зручність управління цими даними.

- **Автоматизація:** MongoDB Atlas автоматизує багато рутинних завдань, спрощуючи процес адміністрування бази даних.

- **Масштабованість та доступність:** Здатність горизонтального масштабування дозволяє адаптувати розмір бази даних до зростання обсягів даних, а глобальна доступність робить MongoDB Atlas вигідним варіантом для проектів з різних частин світу.

- **Спільнота та підтримка:** MongoDB має велику та активну спільноту користувачів, а MongoDB Atlas отримує регулярні оновлення та підтримку від розробників.

## Приклади використання MongoDB та MongoDB Atlas

### Створення хмарної бази даних

Для початку створюємо акаунт у сервісі [MongoDB](https://www.mongodb.com/), і після авторизації створюємо проєкт.

<p align="center">
  <img src="./pictures/create_project.png" alt="create_project.png">
</p>
 
 Даємо назву і стовюємо хмарну базу даних MongoDB Atlas. Обираємо **безкоштону версію**, якщо ви плануєте серйозно працювати з MongoBD Atlas, то обирайте іншу, **провайдер**, я обрав AWS, та **регіон**, який вам підходить або знаходиться найближче до вас. Я обрав Париж.

<p align="center">
  <img src="./pictures/create_db.png" alt="create_db.png">
</p>

Тепер час створити такого собі адміна нашої хмарної бази даних, вводимо ім'я та пароль. Це обов'язково буде треба, щоб підключити нашу базу даних до програми.

<p align="center">
  <img src="./pictures/create_admin.png" alt="create_admin.png">
</p>

Cупер! Перший этап успішно закінчено і ми створили хмарну базу даних.

### Підключення MongoBD у проєкт Node.js

Для підключення та взаємодії з MongoDB використовується бібліотека Mongoose. 

```bash
npm install mongoose
```

Підключаємо бібліотеку mongoose, яку тільки що встановили.

```javascript 
import express from 'express'
import mongoose from 'mongoose' // підключення mongoose
import router from './router.js'
```
### Підключення нашої бази даних у проєкт

Підключення до самої бази даних потребує URL-підключення до нашої хмарної БД. Він знаходиться у нашому кластері на сервірі [MongoBD Atlas](https://www.mongodb.com/atlas/database). 
<p align="center">
  <img src="./pictures/connect_db.png" alt="connect_db.png">
</p>

Тепер ми маємо усе, щоб підключити нашу хмарну БД.

```javascript 
const PORT = 5000
// Ось наш URL-підключення, де треба вказати користувача та правильний пароль!
const DB_URL = `mongodb+srv://tytianiuk:tytianiuk@cluster0.9shmcij.mongodb.net/?retryWrites=true&w=majority`

const app = express()

app.use(express.json())
app.use('/api', router)

async function startApp() {
    try {
        await mongoose.connect(DB_URL) // підключення нашої хмарної БД
        app.listen(PORT, () => console.log(`SERVER STARTED ON PORT ${PORT}`))
    } catch (error) {
        console.log(error)
    }
}
startApp()
```

### Створення моделі даних у MongoDB

Тепер подивимося, як створити модель даних у MongoDB. 

```javascript
import mongoose from 'mongoose' // підключаємо mongoose

const Post = new mongoose.Schema({ // cтворення схеми
    user: { type: String, required: true },
    age: { type: String, required: true },
    job: { type: String },
})

export default mongoose.model('Post', Post) // експорт схеми
```

Для тестування я зробив кілька маршрутів, такі як додавання користувача, видалення за id та отримання всіх користувачів.

```javascript
router.post('/posts', async (req, res) => {
    try {
        const { user, age, job } = req.body
        const post = await Post.create({ user, age, job })
        res.json(post)
    } catch (error) {
        res.status(500).json(error)
    }
})

router.get('/posts', async (req, res) => {
    try {
        const posts = await Post.find()
        return res.json(posts)
    } catch (error) {
        res.status(500).json(error)
    }
})

router.delete('/posts/:id', async (req, res) => {
    try {
        const { id } = req.params
        if (!id) res.status(500).json({ message: 'Id не вказан' })
        const post = await Post.findByIdAndDelete(id)
        return res.json(post)
    } catch (error) {
        res.status(500).json(error)
    }
})
```
### Тестування

Спробуймо створити користувача. 
<p align="center">
  <img src="./pictures/create_user.png" alt="create_user.png">
</p>

Як бачимо, успішно створено і  найголовніше, що це можна побачити на MongoDB Atlas у кластері.
<p align="center">
  <img src="./pictures/add_user_mongo.png" alt="add_user_mongo.png">
</p>

Додав ще одного користувача Івана, тепер їх двоє. І спробуймо отримати їх з нашої хмарної БД.

<p align="center">
  <img src="./pictures/get_users.png" alt="get_users.png">
</p>

Отримано правильно користувачів з БД. До того ж, користувачів змінювати і видаляти можна прямо на сервісі. 

<p align="center">
  <img src="./pictures/edit_or_delete.png" alt="edit_or_delete.png">
</p>

## Вискновки

**MongoDB** та **MongoDB Atlas** — це потужна комбінація для розробників, які шукають ефективне та гнучке рішення для зберігання та обробки даних. Їх гнучкість, автоматизовані можливості та облачна інфраструктура роблять їх перевагою для проєктів будь-якої складності.

<p align="center">
  <img src="./pictures/thanks.png" alt="thanks.png">
</p>